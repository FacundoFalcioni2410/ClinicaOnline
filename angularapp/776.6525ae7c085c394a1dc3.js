"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[776],{6776:(Zt,h,r)=>{r.r(h),r.d(h,{TurnosModule:()=>ht});var l=r(8583),x=r(611),p=r(8239),t=r(7716),f=r(5160),g=r(4132);function v(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"span",9),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw(2).seleccionarPaciente(c)}),t._uU(1),t.qZA()}if(2&e){const i=s.$implicit;t.xp6(1),t.lnq("",null==i?null:i.nombre," ",i.apellido," - ",i.dni,"")}}function C(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"span",9),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw(2).seleccionarEspecialidad(c.especialidad)}),t._uU(1),t.qZA()}if(2&e){const i=s.$implicit;t.xp6(1),t.Oqu(null==i?null:i.especialidad)}}function b(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"i",21),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit;return t.oxw(3).cancelarTurno(o)}),t.qZA()}}function A(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"i",22),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit;return t.oxw(3).rechazarTurno(o)}),t.qZA()}}function q(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"i",23),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit;return t.oxw(3).aceptarTurno(o)}),t.qZA()}}function M(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"i",24),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit;return t.oxw(3).finalizarTurno(o)}),t.qZA()}}function k(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"i",25),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit;return t.oxw(3).verComentario(o)}),t.qZA()}}function E(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"tr",15),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw(3).enviarTurno(c)}),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"uppercase"),t.qZA(),t.TgZ(14,"td"),t.YNc(15,b,1,0,"i",16),t.YNc(16,A,1,0,"i",17),t.YNc(17,q,1,0,"i",18),t.YNc(18,M,1,0,"i",19),t.YNc(19,k,1,0,"i",20),t.qZA(),t._UZ(20,"td"),t.qZA()}if(2&e){const i=s.$implicit,n=t.oxw(3);t.xp6(2),t.Oqu(i.fecha),t.xp6(2),t.Oqu(i.hora),t.xp6(2),t.Oqu(i.especialidad),t.xp6(2),t.lnq("",null==n.especialista?null:n.especialista.nombre," ",null==n.especialista?null:n.especialista.apellido," - ",null==n.especialista?null:n.especialista.dni,""),t.xp6(2),t.lnq("",null==i.pacienteCompleto?null:i.pacienteCompleto.nombre," ",null==i.pacienteCompleto?null:i.pacienteCompleto.apellido," - ",null==i.pacienteCompleto?null:i.pacienteCompleto.dni,""),t.xp6(2),t.Oqu(t.lcZ(13,15,i.estado)),t.xp6(3),t.Q6J("ngIf","aceptado"!==i.estado||"realizado"!==i.estado||"rechazado"!==i.estado),t.xp6(1),t.Q6J("ngIf","aceptado"===i.estado||"realizado"===i.estado||"rechazado"===i.estado),t.xp6(1),t.Q6J("ngIf","realizado"===i.estado||"cancelado"===i.estado||"rechazado"===i.estado),t.xp6(1),t.Q6J("ngIf","aceptado"===i.estado),t.xp6(1),t.Q6J("ngIf",i.comentario)}}function F(e,s){if(1&e&&(t.TgZ(0,"div",10),t.TgZ(1,"table",11),t.TgZ(2,"thead"),t.TgZ(3,"th",12),t._uU(4,"Fecha"),t.qZA(),t.TgZ(5,"th",12),t._uU(6,"Hora"),t.qZA(),t.TgZ(7,"th",12),t._uU(8,"Especialidad"),t.qZA(),t.TgZ(9,"th",12),t._uU(10,"Especialista"),t.qZA(),t.TgZ(11,"th",12),t._uU(12,"Paciente"),t.qZA(),t.TgZ(13,"th",12),t._uU(14,"Estado"),t.qZA(),t.TgZ(15,"th",13),t._uU(16,"Accion"),t.qZA(),t.qZA(),t.TgZ(17,"tbody"),t.YNc(18,E,21,17,"tr",14),t.qZA(),t.qZA(),t.qZA()),2&e){const i=t.oxw(2);t.xp6(18),t.Q6J("ngForOf",i.turnosMostrar)}}function N(e,s){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"span",26),t._uU(2),t.qZA(),t.qZA()),2&e){const i=t.oxw(2);t.xp6(2),t.Oqu(i.mensaje)}}function J(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"h2",3),t._uU(2,"Listado de mis turnos"),t.qZA(),t.TgZ(3,"i",4),t.NdJ("click",function(){return t.CHM(i),t.oxw().limpiarFiltros()}),t._uU(4,"Limpiar filtros"),t.qZA(),t.TgZ(5,"div",5),t.YNc(6,v,2,3,"span",6),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,C,2,1,"span",6),t.qZA(),t.YNc(9,F,19,1,"div",7),t.YNc(10,N,3,1,"div",8),t.qZA()}if(2&e){const i=t.oxw();t.xp6(6),t.Q6J("ngForOf",i.pacientes),t.xp6(2),t.Q6J("ngForOf",i.especialidades),t.xp6(1),t.Q6J("ngIf",""===i.mensaje),t.xp6(1),t.Q6J("ngIf",""!==i.mensaje)}}function U(e,s){1&e&&t._UZ(0,"app-spinner")}let O=(()=>{class e{constructor(i){var n=this;this.firestore=i,this.turnos=[],this.turnosMostrar=[],this.pacientes=[],this.mensaje="",this.firestore.turnosObs.subscribe(function(){var o=(0,p.Z)(function*(c){n.especialista=JSON.parse(localStorage.getItem("usuario"));for(let a of c)a.especialista===n.especialista.dni&&n.turnos.push(a);n.turnosMostrar=n.turnos,yield n.getPacientes(),n.firestore.especialidadesObs.subscribe(a=>{n.especialidades=a}),console.log(n.turnos)});return function(c){return o.apply(this,arguments)}}())}ngOnInit(){}limpiarFiltros(){this.mensaje="",this.turnosMostrar=this.turnos}getPacientes(){var i=this;return(0,p.Z)(function*(){let o;for(let c of i.turnos)o=yield i.firestore.getPaciente(c.paciente),c.pacienteCompleto=o,i.pacientes.push(o);i.pacientes=i.eliminarObjetosDuplicados(i.pacientes,"dni")})()}eliminarObjetosDuplicados(i,n){var o=[],c={};for(let a in i)c[i[a][n]]=i[a];for(let a in c)o.push(c[a]);return o}seleccionarPaciente(i){this.turnosMostrar=[],this.paciente=i;for(let n of this.turnos)n.paciente===i.dni&&this.turnosMostrar.push(n);0===this.turnosMostrar.length&&(this.mensaje="No hay turnos con el paciente seleccionado")}seleccionarEspecialidad(i){this.mensaje="",this.turnosMostrar=[],this.especialidad=i;for(let n of this.turnos)n.especialidad===i&&this.turnosMostrar.push(n);0===this.turnosMostrar.length&&(this.mensaje="No hay turnos con la especialidad seleccionada")}aceptarTurno(i){i.estado="aceptado",this.firestore.modificarEstadoTurno(i)}rechazarTurno(i){}cancelarTurno(i){}finalizarTurno(i){}verComentario(i){}enviarTurno(i){}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(f.C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-mis-turnos-especialista"]],decls:4,vars:2,consts:[[1,"container"],[4,"ngIf","ngIfElse"],["spinner",""],[1,"text-center","text-light"],[1,"bi","bi-funnel-fill","text-info","noselect",3,"click"],[1,"col-12","col-sm-6"],["class","badge rounded-pill bg-dark text-light m-1 mt-2 p-2 noselect",3,"click",4,"ngFor","ngForOf"],["class","table-responsive text-center",4,"ngIf"],[4,"ngIf"],[1,"badge","rounded-pill","bg-dark","text-light","m-1","mt-2","p-2","noselect",3,"click"],[1,"table-responsive","text-center"],[1,"table","table-dark","table-hover","noselect"],["scope","col"],["scope","col-2"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["class","bi bi-x-square-fill","title","Cancelar turno",3,"click",4,"ngIf"],["class","bi bi-x-lg ms-1","title","Rechazar turno",3,"click",4,"ngIf"],["class","bi bi-check-circle ms-1","title","Aceptar turno",3,"click",4,"ngIf"],["class","bi bi-check-square-fill ms-1","title","Finalizar turno",3,"click",4,"ngIf"],["class","bi bi-layout-text-sidebar-reverse ms-1","title","Ver rese\xf1a",3,"click",4,"ngIf"],["title","Cancelar turno",1,"bi","bi-x-square-fill",3,"click"],["title","Rechazar turno",1,"bi","bi-x-lg","ms-1",3,"click"],["title","Aceptar turno",1,"bi","bi-check-circle","ms-1",3,"click"],["title","Finalizar turno",1,"bi","bi-check-square-fill","ms-1",3,"click"],["title","Ver rese\xf1a",1,"bi","bi-layout-text-sidebar-reverse","ms-1",3,"click"],[1,"text-danger"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div",0),t.YNc(1,J,11,4,"div",1),t.YNc(2,U,1,0,"ng-template",null,2,t.W1O),t.qZA()),2&i){const o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",n.turnosMostrar)("ngIfElse",o)}},directives:[l.O5,l.sg,g.O],pipes:[l.gd],styles:[""]}),e})();function I(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"span",9),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw(2).seleccionarEspecialista(c)}),t._uU(1),t.qZA()}if(2&e){const i=s.$implicit;t.xp6(1),t.lnq("",null==i?null:i.nombre," ",i.apellido," - ",i.dni,"")}}function w(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"span",9),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw(2).seleccionarEspecialidad(c)}),t._uU(1),t.qZA()}if(2&e){const i=s.$implicit;t.xp6(1),t.Oqu(i)}}function y(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"i",21),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit;return t.oxw(3).cancelarTurno(o)}),t.qZA()}}function P(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"i",22),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit;return t.oxw(3).rechazarTurno(o)}),t.qZA()}}function Y(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"i",23),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit;return t.oxw(3).aceptarTurno(o)}),t.qZA()}}function S(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"i",24),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit;return t.oxw(3).finalizarTurno(o)}),t.qZA()}}function Q(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"i",25),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit;return t.oxw(3).verComentario(o)}),t.qZA()}}function z(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"tr",15),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw(3).enviarTurno(c)}),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"uppercase"),t.qZA(),t.TgZ(14,"td"),t.YNc(15,y,1,0,"i",16),t.YNc(16,P,1,0,"i",17),t.YNc(17,Y,1,0,"i",18),t.YNc(18,S,1,0,"i",19),t.YNc(19,Q,1,0,"i",20),t.qZA(),t._UZ(20,"td"),t.qZA()}if(2&e){const i=s.$implicit,n=t.oxw(3);t.xp6(2),t.Oqu(i.fecha),t.xp6(2),t.Oqu(i.hora),t.xp6(2),t.Oqu(i.especialidad),t.xp6(2),t.lnq("",null==i.especialistaCompleto?null:i.especialistaCompleto.nombre," ",null==i.especialistaCompleto?null:i.especialistaCompleto.apellido," - ",null==i.especialistaCompleto?null:i.especialistaCompleto.dni,""),t.xp6(2),t.lnq("",null==n.paciente?null:n.paciente.nombre," ",null==n.paciente?null:n.paciente.apellido," - ",null==n.paciente?null:n.paciente.dni,""),t.xp6(2),t.Oqu(t.lcZ(13,15,i.estado)),t.xp6(3),t.Q6J("ngIf","aceptado"!==i.estado||"realizado"!==i.estado||"rechazado"!==i.estado),t.xp6(1),t.Q6J("ngIf","aceptado"===i.estado||"realizado"===i.estado||"rechazado"===i.estado),t.xp6(1),t.Q6J("ngIf","realizado"===i.estado||"cancelado"===i.estado||"rechazado"===i.estado),t.xp6(1),t.Q6J("ngIf","aceptado"===i.estado),t.xp6(1),t.Q6J("ngIf",i.comentario)}}function j(e,s){if(1&e&&(t.TgZ(0,"div",10),t.TgZ(1,"table",11),t.TgZ(2,"thead"),t.TgZ(3,"th",12),t._uU(4,"Fecha"),t.qZA(),t.TgZ(5,"th",12),t._uU(6,"Hora"),t.qZA(),t.TgZ(7,"th",12),t._uU(8,"Especialidad"),t.qZA(),t.TgZ(9,"th",12),t._uU(10,"Especialista"),t.qZA(),t.TgZ(11,"th",12),t._uU(12,"Paciente"),t.qZA(),t.TgZ(13,"th",12),t._uU(14,"Estado"),t.qZA(),t.TgZ(15,"th",13),t._uU(16,"Accion"),t.qZA(),t.qZA(),t.TgZ(17,"tbody"),t.YNc(18,z,21,17,"tr",14),t.qZA(),t.qZA(),t.qZA()),2&e){const i=t.oxw(2);t.xp6(18),t.Q6J("ngForOf",i.turnosMostrar)}}function H(e,s){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"span",26),t._uU(2),t.qZA(),t.qZA()),2&e){const i=t.oxw(2);t.xp6(2),t.Oqu(i.mensaje)}}function $(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"h2",3),t._uU(2,"Listado de mis turnos"),t.qZA(),t.TgZ(3,"i",4),t.NdJ("click",function(){return t.CHM(i),t.oxw().limpiarFiltros()}),t._uU(4,"Limpiar filtros"),t.qZA(),t.TgZ(5,"div",5),t.YNc(6,I,2,3,"span",6),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,w,2,1,"span",6),t.qZA(),t.YNc(9,j,19,1,"div",7),t.YNc(10,H,3,1,"div",8),t.qZA()}if(2&e){const i=t.oxw();t.xp6(6),t.Q6J("ngForOf",i.especialistas),t.xp6(2),t.Q6J("ngForOf",i.especialidades),t.xp6(1),t.Q6J("ngIf",""===i.mensaje),t.xp6(1),t.Q6J("ngIf",""!==i.mensaje)}}function D(e,s){1&e&&t._UZ(0,"app-spinner")}let L=(()=>{class e{constructor(i){var n=this;this.firestore=i,this.turnos=[],this.pacientes=[],this.especialistas=[],this.especialidades=[],this.mensaje="",this.firestore.turnosObs.subscribe(function(){var o=(0,p.Z)(function*(c){n.paciente=JSON.parse(localStorage.getItem("usuario"));let a=0;for(let u of c)u.paciente===n.paciente.dni&&(n.turnos.push(u),a=n.especialidades.indexOf(u.especialidad),-1===a&&n.especialidades.push(u.especialidad));yield n.getEspecialista(),console.log(n.especialidades),n.turnosMostrar=n.turnos});return function(c){return o.apply(this,arguments)}}())}ngOnInit(){}limpiarFiltros(){this.mensaje="",this.turnosMostrar=this.turnos}getEspecialista(){var i=this;return(0,p.Z)(function*(){let o;for(let c of i.turnos)o=yield i.firestore.getEspecialista(c.especialista),c.especialistaCompleto=o,i.especialistas.push(o);i.especialistas=i.eliminarObjetosDuplicados(i.especialistas,"dni"),console.log(i.especialistas)})()}eliminarObjetosDuplicados(i,n){var o=[],c={};for(let a in i)c[i[a][n]]=i[a];for(let a in c)o.push(c[a]);return o}seleccionarEspecialista(i){this.turnosMostrar=[],this.especialista=i;for(let n of this.turnos)n.especialista===i.dni&&this.turnosMostrar.push(n);0===this.turnosMostrar.length&&(this.mensaje="No hay turnos con el especialista seleccionado")}seleccionarEspecialidad(i){this.mensaje="",this.turnosMostrar=[],this.especialidad=i;for(let n of this.turnos)n.especialidad===i&&this.turnosMostrar.push(n);0===this.turnosMostrar.length&&(this.mensaje="No hay turnos con la especialidad seleccionada")}aceptarTurno(i){i.estado="aceptado",this.firestore.modificarEstadoTurno(i)}rechazarTurno(i){}cancelarTurno(i){}finalizarTurno(i){}verComentario(i){}enviarTurno(i){}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(f.C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-mis-turnos-paciente"]],decls:4,vars:2,consts:[[1,"container"],[4,"ngIf","ngIfElse"],["spinner",""],[1,"text-center","text-light"],[1,"bi","bi-funnel-fill","text-info","noselect",3,"click"],[1,"col-12","col-sm-6"],["class","badge rounded-pill bg-dark text-light m-1 mt-2 p-2 noselect",3,"click",4,"ngFor","ngForOf"],["class","table-responsive text-center",4,"ngIf"],[4,"ngIf"],[1,"badge","rounded-pill","bg-dark","text-light","m-1","mt-2","p-2","noselect",3,"click"],[1,"table-responsive","text-center"],[1,"table","table-dark","table-hover","noselect"],["scope","col"],["scope","col-2"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["class","bi bi-x-square-fill","title","Cancelar turno",3,"click",4,"ngIf"],["class","bi bi-x-lg ms-1","title","Rechazar turno",3,"click",4,"ngIf"],["class","bi bi-check-circle ms-1","title","Aceptar turno",3,"click",4,"ngIf"],["class","bi bi-check-square-fill ms-1","title","Finalizar turno",3,"click",4,"ngIf"],["class","bi bi-layout-text-sidebar-reverse ms-1","title","Ver rese\xf1a",3,"click",4,"ngIf"],["title","Cancelar turno",1,"bi","bi-x-square-fill",3,"click"],["title","Rechazar turno",1,"bi","bi-x-lg","ms-1",3,"click"],["title","Aceptar turno",1,"bi","bi-check-circle","ms-1",3,"click"],["title","Finalizar turno",1,"bi","bi-check-square-fill","ms-1",3,"click"],["title","Ver rese\xf1a",1,"bi","bi-layout-text-sidebar-reverse","ms-1",3,"click"],[1,"text-danger"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div",0),t.YNc(1,$,11,4,"div",1),t.YNc(2,D,1,0,"ng-template",null,2,t.W1O),t.qZA()),2&i){const o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",n.turnosMostrar)("ngIfElse",o)}},directives:[l.O5,l.sg,g.O],pipes:[l.gd],styles:[""]}),e})();var m=r(665),R=r(7989);function V(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"app-tabla-paciente",14),t.NdJ("enviar",function(o){return t.CHM(i),t.oxw(2).recibirPaciente(o)}),t.qZA()}if(2&e){const i=t.oxw(2);t.Q6J("pacientes",i.pacientes)}}function B(e,s){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,V,1,1,"app-tabla-paciente",13),t.qZA()),2&e){const i=t.oxw(),n=t.MAs(20);t.xp6(1),t.Q6J("ngIf",void 0!==i.pacientes)("ngIfElse",n)}}function X(e,s){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.lnq("Turno para el paciente ",i.paciente.nombre," ",i.paciente.apellido," con DNI: ",i.paciente.dni,"")}}function W(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"span",15),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw().cambioEspecialidad(c.especialidad)}),t._uU(1),t.qZA()}if(2&e){const i=s.$implicit;t.xp6(1),t.Oqu(null==i?null:i.especialidad)}}function G(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"span",16),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw().cambiarEspecialista(c)}),t._uU(1),t.qZA()}if(2&e){const i=s.$implicit;t.xp6(1),t.AsE("",null==i?null:i.nombre," ",null==i?null:i.apellido,"")}}function K(e,s){if(1&e&&(t.TgZ(0,"span",17),t._uU(1),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.hij(" ",null==i.fechaSeleccionada?null:i.fechaSeleccionada.dia," ")}}function tt(e,s){if(1&e&&(t.TgZ(0,"span",17),t._uU(1),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.hij(" ",i.hora," ")}}function it(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div",20),t.TgZ(1,"div",21),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw(2).seleccionarFecha(c)}),t.TgZ(2,"span",22),t._uU(3),t.qZA(),t.qZA(),t.qZA()}if(2&e){const i=s.$implicit;t.xp6(3),t.hij(" ",i.dia," ")}}function et(e,s){if(1&e&&(t.TgZ(0,"div",18),t.YNc(1,it,4,1,"div",19),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.fechasEspecialistaActual)}}function nt(e,s){if(1&e&&(t.TgZ(0,"div",20),t.TgZ(1,"div",23),t._uU(2),t.qZA(),t.qZA()),2&e){const i=t.oxw();t.xp6(2),t.Oqu(i.mensaje)}}function ot(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div",26),t.TgZ(1,"span",27),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw(2).seleccionarHora(c)}),t._uU(2),t.qZA(),t.qZA()}if(2&e){const i=s.$implicit;t.xp6(2),t.Oqu(i)}}function st(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div",18),t.YNc(1,ot,3,1,"div",24),t.TgZ(2,"button",25),t.NdJ("click",function(){return t.CHM(i),t.oxw().fechaSeleccionada=void 0}),t._uU(3,"Volver atras"),t.qZA(),t.qZA()}if(2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",null==i.fechaSeleccionada?null:i.fechaSeleccionada.turnosDelDia)}}function ct(e,s){1&e&&t._UZ(0,"app-spinner")}let at=(()=>{class e{constructor(i,n){this.firestore=i,this.datePipe=n,this.especialidadActual="",this.paciente=null,this.array=[],this.turnos=[],this.fechas=[],this.fechasEspecialistaActual=[],this.fecha="",this.hora="",this.mensaje="",this.recibido=!1,this.turnos=["08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30"],this.getEspecialidades(),this.getEspecialistas(),this.getPacientes(),this.obtenerProximosDias(new Date,15)}ngOnInit(){}cambiarEspecialista(i){var n;"paciente"===(null===(n=this.firestore.usuarioActual)||void 0===n?void 0:n.perfil)&&!this.paciente&&(this.paciente=this.firestore.usuarioActual,console.log(this.paciente)),this.especialista!==i&&(this.mensaje="",this.especialista=i,this.fechasEspecialistaActual=[],this.cargarHorarios())}seleccionarFecha(i){this.fechaSeleccionada=i}cargarHorarios(){var i,n,o,c;if(null===(i=this.especialista)||void 0===i?void 0:i.horarios)for(let a of this.fechas)for(let u of null===(n=this.especialista)||void 0===n?void 0:n.horarios){let _;if(a.getDay()===u){if(_=6!==a.getDay()?{dia:this.datePipe.transform(a,"dd/MM/yyyy"),turnosDelDia:this.turnos.map(d=>d)}:{dia:this.datePipe.transform(a,"dd/MM/yyyy"),turnosDelDia:this.turnos.map((d,T)=>{if(T<13)return d})},null===(c=null===(o=this.especialista)||void 0===o?void 0:o.turno)||void 0===c?void 0:c.length)for(let d of this.especialista.turno)if(d.fecha===_.dia){let T=_.turnosDelDia.indexOf(d.hora);if(-1!==T){let xt=_.turnosDelDia.splice(T,1);console.log(xt[0])}}this.fechasEspecialistaActual.push(_)}}else this.mensaje="El especialista no tiene disponibilidad horaria",console.log(this.mensaje)}seleccionarHora(i){this.hora=i,console.log("El turno es el dia: ",this.fechaSeleccionada.dia," a la hora: ",this.hora)}getEspecialidades(){this.firestore.especialidadesObs.subscribe(i=>{this.especialidades=i})}getEspecialistas(){this.firestore.especialistasObs.subscribe(i=>{this.especialistas=i})}getPacientes(){this.firestore.pacientesObs.subscribe(i=>{this.pacientes=i})}cambioEspecialidad(i){this.hora="",this.fechaSeleccionada=null,this.especialidadActual=i,this.array=this.especialistas.filter(n=>n.especialidad===i?n:null)}solicitarTurno(){var i,n,o;console.log(this.paciente);let c={fecha:this.fechaSeleccionada.dia,hora:this.hora,dniPaciente:this.paciente.dni,especialidad:this.especialidadActual};(null===(i=this.especialista)||void 0===i?void 0:i.turno)||(this.especialista.turno=[]),(null===(n=this.paciente)||void 0===n?void 0:n.turno)||(this.paciente.turno=[]),this.especialista.turno.push(c);let a={especialidad:this.especialidadActual,especialista:null===(o=this.especialista)||void 0===o?void 0:o.dni,fecha:this.fechaSeleccionada.dia,hora:this.hora};this.paciente.turno.push(a),this.firestore.addTurnoPaciente(this.paciente.turno,this.paciente.id),this.firestore.addTurnoEspecialista(this.especialista),a.especialista=this.especialista.dni,a.paciente=this.paciente.dni,a.estado="pendiente",this.firestore.addTurno(a)}obtenerProximosDias(i,n){for(let o=0;o<n;o++)i.setDate(i.getDate()+1),this.fechas.push(new Date(i))}recibirPaciente(i){this.recibido=!0,this.paciente=i}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(f.C),t.Y36(l.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-solicitar-turno"]],decls:21,vars:10,consts:[[1,"container"],[4,"ngIf"],[3,"ngSubmit"],[1,"col-12","col-sm-6","text-light"],[1,"col-12","col-sm-6"],["class","badge rounded-pill bg-info text-dark mt-2 m-1 noselect p-2",3,"click",4,"ngFor","ngForOf"],["class","badge rounded-pill bg-dark text-light m-1 mt-2 p-2 noselect",3,"click",4,"ngFor","ngForOf"],["class","badge rounded-pill bg-warning text-dark m-1 mt-2 p-2 noselect",4,"ngIf"],[1,"col-12","mt-2"],["class","row",4,"ngIf"],["class","col-4",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["spinner",""],[3,"pacientes","enviar",4,"ngIf","ngIfElse"],[3,"pacientes","enviar"],[1,"badge","rounded-pill","bg-info","text-dark","mt-2","m-1","noselect","p-2",3,"click"],[1,"badge","rounded-pill","bg-dark","text-light","m-1","mt-2","p-2","noselect",3,"click"],[1,"badge","rounded-pill","bg-warning","text-dark","m-1","mt-2","p-2","noselect"],[1,"row"],["class","col-4",4,"ngFor","ngForOf"],[1,"col-4"],[3,"click"],[1,"badge","rounded-pill","bg-dark","text-light","m-1","mt-2","p-2","noselect"],[1,"text-danger"],["class","col-2",4,"ngFor","ngForOf"],[1,"btn","btn-info","mt-2",3,"click"],[1,"col-2"],[1,"badge","rounded-pill","bg-dark","text-light","p-2","noselect",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0),t.YNc(1,B,2,2,"div",1),t.TgZ(2,"div"),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return n.solicitarTurno()}),t.TgZ(4,"div",3),t.YNc(5,X,2,3,"span",1),t.qZA(),t.TgZ(6,"div",4),t.YNc(7,W,2,1,"span",5),t.qZA(),t.TgZ(8,"div",4),t.YNc(9,G,2,2,"span",6),t.YNc(10,K,2,1,"span",7),t.YNc(11,tt,2,1,"span",7),t.qZA(),t.TgZ(12,"div",8),t.YNc(13,et,2,1,"div",9),t.YNc(14,nt,3,1,"div",10),t.YNc(15,st,4,1,"div",9),t.qZA(),t.TgZ(16,"div",8),t.TgZ(17,"button",11),t._uU(18,"Solicitar turno"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(19,ct,1,0,"ng-template",null,12,t.W1O),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngIf","admin"===(null==n.firestore||null==n.firestore.usuarioActual?null:n.firestore.usuarioActual.perfil)),t.xp6(4),t.Q6J("ngIf",n.paciente),t.xp6(2),t.Q6J("ngForOf",n.especialidades),t.xp6(2),t.Q6J("ngForOf",n.array),t.xp6(1),t.Q6J("ngIf",n.fechaSeleccionada),t.xp6(1),t.Q6J("ngIf",n.hora),t.xp6(2),t.Q6J("ngIf",!n.fechaSeleccionada&&""===n.mensaje),t.xp6(1),t.Q6J("ngIf",""!==n.mensaje),t.xp6(1),t.Q6J("ngIf",n.fechaSeleccionada),t.xp6(2),t.Q6J("disabled",""===n.hora||null===n.paciente))},directives:[l.O5,m._Y,m.JL,m.F,l.sg,R._,g.O],styles:[""]}),e})();var rt=r(8259),Z=r.n(rt);function lt(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"i",11),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit;return t.oxw(3).motivoCancelar(o)}),t.qZA(),t.qZA()}}function pt(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"tr",9),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw(3).enviarTurno(c)}),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"uppercase"),t.qZA(),t.YNc(14,lt,2,0,"td",10),t._UZ(15,"td"),t.qZA()}if(2&e){const i=s.$implicit;t.xp6(2),t.Oqu(i.fecha),t.xp6(2),t.Oqu(i.hora),t.xp6(2),t.Oqu(i.especialidad),t.xp6(2),t.lnq("",null==i.especialistaCompleto?null:i.especialistaCompleto.nombre," ",null==i.especialistaCompleto?null:i.especialistaCompleto.apellido," - ",null==i.especialistaCompleto?null:i.especialistaCompleto.dni,""),t.xp6(2),t.lnq("",null==i.pacienteCompleto?null:i.pacienteCompleto.nombre," ",null==i.pacienteCompleto?null:i.pacienteCompleto.apellido," - ",null==i.pacienteCompleto?null:i.pacienteCompleto.dni,""),t.xp6(2),t.Oqu(t.lcZ(13,11,i.estado)),t.xp6(2),t.Q6J("ngIf","aceptado"!==i.estado&&"realizado"!==i.estado&&"rechazado"!==i.estado&&"cancelado"!==i.estado)}}function ut(e,s){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h2",3),t._uU(2,"Listado de turnos"),t.qZA(),t.TgZ(3,"div",4),t.TgZ(4,"table",5),t.TgZ(5,"thead"),t.TgZ(6,"th",6),t._uU(7,"Fecha"),t.qZA(),t.TgZ(8,"th",6),t._uU(9,"Hora"),t.qZA(),t.TgZ(10,"th",6),t._uU(11,"Especialidad"),t.qZA(),t.TgZ(12,"th",6),t._uU(13,"Especialista"),t.qZA(),t.TgZ(14,"th",6),t._uU(15,"Paciente"),t.qZA(),t.TgZ(16,"th",6),t._uU(17,"Estado"),t.qZA(),t.TgZ(18,"th",7),t._uU(19,"Accion"),t.qZA(),t.qZA(),t.TgZ(20,"tbody"),t.YNc(21,pt,16,13,"tr",8),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const i=t.oxw(2);t.xp6(21),t.Q6J("ngForOf",i.turnos)}}function _t(e,s){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,ut,22,1,"div",1),t.qZA()),2&e){const i=t.oxw(),n=t.MAs(3);t.xp6(1),t.Q6J("ngIf",i.turnos[0].especialistaCompleto)("ngIfElse",n)}}function dt(e,s){1&e&&t._UZ(0,"app-spinner")}const mt=[{path:"mis-turnos/especialista",component:O},{path:"mis-turnos/paciente",component:L},{path:"solicitar-turno",component:at},{path:"",component:(()=>{class e{constructor(i){var n=this;this.firestore=i,this.firestore.turnosObs.subscribe(function(){var o=(0,p.Z)(function*(c){n.turnos=c,yield n.getPacientes(),yield n.getEspecialistas(),console.log(n.turnos)});return function(c){return o.apply(this,arguments)}}())}getPacientes(){var i=this;return(0,p.Z)(function*(){for(let n of i.turnos)n.pacienteCompleto=yield i.firestore.getPaciente(n.paciente)})()}getEspecialistas(){var i=this;return(0,p.Z)(function*(){for(let n of i.turnos)n.especialistaCompleto=yield i.firestore.getEspecialista(n.especialista)})()}aceptarTurno(i){i.estado="aceptado",this.firestore.modificarEstadoTurno(i)}rechazarTurno(i){}cancelarTurno(i){}finalizarTurno(i){}verComentario(i){}motivoCancelar(i){var n=this;return(0,p.Z)(function*(){const{value:o}=yield Z().fire({title:"Cancelaci\xf3n de turno",input:"text",inputLabel:"Motivo de cancelaci\xf3n",inputValue:"",showCancelButton:!0,inputValidator:c=>c?"":"Debe especificar el motivo de la cancelaci\xf3n",inputAttributes:{required:"true"}});o?(i.estado="cancelado",i.razon=o,n.firestore.modificarEstadoTurno(i)):Z().fire({text:"El turno no ha podido ser cancelado. Motivo: Debe especificar una razon",timer:2500,timerProgressBar:!0,icon:"error",position:"bottom",toast:!0})})()}ngOnInit(){}enviarTurno(i){}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(f.C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-turnos"]],decls:4,vars:2,consts:[[1,"container"],[4,"ngIf","ngIfElse"],["spinner",""],[1,"text-center","text-light"],[1,"table-responsive","text-center"],[1,"table","table-dark","table-hover","noselect"],["scope","col"],["scope","col-2"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[4,"ngIf"],["title","Cancelar turno",1,"bi","bi-x-square-fill",3,"click"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div",0),t.YNc(1,_t,2,2,"div",1),t.YNc(2,dt,1,0,"ng-template",null,2,t.W1O),t.qZA()),2&i){const o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",n.turnos)("ngIfElse",o)}},directives:[l.O5,l.sg,g.O],pipes:[l.gd],styles:[""]}),e})()}];let ft=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[x.Bz.forChild(mt)],x.Bz]}),e})();var gt=r(2271),Tt=r(9433);let ht=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[l.uU],imports:[[l.ez,ft,m.u5,m.UX,gt.m,Tt.UsuariosModule]]}),e})()}}]);